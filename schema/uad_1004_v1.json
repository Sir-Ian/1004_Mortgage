{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/schema/uad_1004_v1.json",
  "title": "UAD 1004 Canonical Payload v1",
  "type": "object",
  "properties": {
    "subject": {
      "type": "object",
      "properties": {
        "address": {
          "type": "object",
          "properties": {
            "street": { "type": "string" },
            "city": { "type": "string" },
            "state": { "type": "string", "pattern": "^[A-Z]{2}$" },
            "zip": { "type": "string", "pattern": "^[0-9]{5}(-?[0-9]{4})?$" }
          },
          "additionalProperties": false
        },
        "county": { "type": "string" },
        "parcel_number": { "type": "string" },
        "pud_indicator": { "type": "boolean" },
        "hoa_amount": { "type": "integer" },
        "hoa_frequency": {
          "type": "string",
          "enum": ["PerMonth", "PerYear", "None"]
        },
        "tax_year": { "type": "string" },
        "real_estate_taxes": { "type": "integer" },
        "public_record_owner": { "type": "string" }
      },
      "additionalProperties": false
    },
    "contract": {
      "type": "object",
      "properties": {
        "assignment_type": {
          "type": "string",
          "enum": ["Purchase", "Refinance", "Other"]
        },
        "contract_price": { "type": "integer" },
        "contract_date": {
          "type": "string",
          "pattern": "^(0[1-9]|1[0-2])/(0[1-9]|[12][0-9]|3[01])/[0-9]{4}$"
        },
        "seller_owner_public_record": {
          "type": "string",
          "enum": ["Yes", "No"]
        },
        "financial_assistance_flag": { "type": "boolean" },
        "financial_assistance_amount": { "type": "integer" },
        "offered_for_sale_flag": { "type": "boolean" },
        "dom": { "type": "string" },
        "offering_price": { "type": "integer" },
        "offering_date": { "type": "string" },
        "offering_data_source": { "type": "string" }
      },
      "additionalProperties": false
    },
    "appraiser": {
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "company_name": { "type": "string" },
        "company_address": {
          "type": "object",
          "properties": {
            "street": { "type": "string" },
            "city": { "type": "string" },
            "state": { "type": "string", "pattern": "^[A-Z]{2}$" },
            "zip": { "type": "string", "pattern": "^[0-9]{5}(-?[0-9]{4})?$" }
          },
          "additionalProperties": false
        },
        "property_appraised_address": {
          "type": "object",
          "properties": {
            "street": { "type": "string" },
            "city": { "type": "string" },
            "state": { "type": "string", "pattern": "^[A-Z]{2}$" },
            "zip": { "type": "string", "pattern": "^[0-9]{5}(-?[0-9]{4})?$" }
          },
          "additionalProperties": false
        },
        "email": { "type": "string", "format": "email" },
        "phone": { "type": "string" },
        "appraised_value": { "type": "integer" },
        "effective_date": {
          "type": "string",
          "pattern": "^(0[1-9]|1[0-2])/(0[1-9]|[12][0-9]|3[01])/[0-9]{4}$"
        },
        "signature_date": {
          "type": "string",
          "pattern": "^(0[1-9]|1[0-2])/(0[1-9]|[12][0-9]|3[01])/[0-9]{4}$"
        },
        "subject_property_status": {
          "type": "array",
          "items": { "type": "string" }
        },
        "comparable_sales_status": {
          "type": "array",
          "items": { "type": "string" }
        },
        "signature_present": { "type": "boolean" }
      },
      "additionalProperties": false
    },
    "certifications": {
      "type": "object",
      "properties": {
        "appraiser": {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "license_number": { "type": "string" },
            "state": { "type": "string", "pattern": "^[A-Z]{2}$" },
            "expiration_date": {
              "type": "string",
              "pattern": "^(0[1-9]|1[0-2])/(0[1-9]|[12][0-9]|3[01])/[0-9]{4}$"
            }
          },
          "additionalProperties": false
        },
        "supervisory_appraiser": {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "license_number": { "type": "string" },
            "state": { "type": "string", "pattern": "^[A-Z]{2}$" },
            "expiration_date": {
              "type": "string",
              "pattern": "^(0[1-9]|1[0-2])/(0[1-9]|[12][0-9]|3[01])/[0-9]{4}$"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "photos": {
      "type": "object",
      "properties": {
        "front_exterior": {
          "type": "object",
          "properties": {
            "caption": { "type": "string" },
            "page_number": { "type": "integer" },
            "present": { "type": "boolean" }
          },
          "additionalProperties": false
        },
        "rear_exterior": {
          "type": "object",
          "properties": {
            "caption": { "type": "string" },
            "page_number": { "type": "integer" }
          },
          "additionalProperties": false
        },
        "street_scene": {
          "type": "object",
          "properties": {
            "caption": { "type": "string" },
            "page_number": { "type": "integer" }
          },
          "additionalProperties": false
        },
        "kitchen": {
          "type": "object",
          "properties": {
            "caption": { "type": "string" },
            "page_number": { "type": "integer" }
          },
          "additionalProperties": false
        },
        "bathroom": {
          "type": "object",
          "properties": {
            "caption": { "type": "string" },
            "page_number": { "type": "integer" }
          },
          "additionalProperties": false
        },
        "living_room": {
          "type": "object",
          "properties": {
            "caption": { "type": "string" },
            "page_number": { "type": "integer" }
          },
          "additionalProperties": false
        },
        "other": {
          "type": "object",
          "properties": {
            "caption": { "type": "string" },
            "page_number": { "type": "integer" }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "sections": {
      "type": "object",
      "properties": {
        "section_a": {
          "type": "object",
          "properties": {
            "title": { "type": "string" },
            "page_number": { "type": "integer" },
            "comments": { "type": "string" }
          },
          "additionalProperties": false
        },
        "section_b": {
          "type": "object",
          "properties": {
            "title": { "type": "string" },
            "page_number": { "type": "integer" },
            "comments": { "type": "string" }
          },
          "additionalProperties": false
        },
        "section_c": {
          "type": "object",
          "properties": {
            "title": { "type": "string" },
            "page_number": { "type": "integer" },
            "comments": { "type": "string" }
          },
          "additionalProperties": false
        },
        "section_d": {
          "type": "object",
          "properties": {
            "title": { "type": "string" },
            "page_number": { "type": "integer" },
            "comments": { "type": "string" }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "reconciliation": {
      "type": "object",
      "properties": {
        "appraisal_type": { "type": "string" },
        "appraised_market_value": { "type": "integer" },
        "indicated_value_by_cost_approach": { "type": "integer" },
        "indicated_value_by_income_approach": { "type": "integer" },
        "indicated_value_by_sales_comparison_approach": { "type": "integer" },
        "effective_date": {
          "type": "string",
          "pattern": "^(0[1-9]|1[0-2])/(0[1-9]|[12][0-9]|3[01])/[0-9]{4}$"
        }
      },
      "additionalProperties": false
    },
    "sales_comparison": {
      "type": "object",
      "properties": {
        "comparables": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "sale_price": { "type": "integer" },
              "sale_price_adjusted": { "type": "integer" },
              "condition": { "type": "string" },
              "gross_living_area": { "type": "string" },
              "site_size": { "type": "string" },
              "view": { "type": "string" },
              "location": { "type": "string" },
              "data_source": { "type": "string" },
              "date_of_sale": { "type": "string" },
              "adjustments": { "type": "string" },
              "net_adjustment": { "type": "integer" },
              "gross_adjustment": { "type": "integer" },
              "rooms": { "type": "string" },
              "bathrooms": { "type": "string" },
              "bedrooms": { "type": "string" }
            },
            "additionalProperties": false
          }
        },
        "indicated_value": { "type": "integer" }
      },
      "additionalProperties": false
    },
    "loan": {
      "type": "object",
      "properties": {
        "loan_number": { "type": "string" },
        "case_number": { "type": "string" },
        "client": { "type": "string" },
        "lender": { "type": "string" },
        "contact": { "type": "string" }
      },
      "additionalProperties": false
    },
    "title": {
      "type": "object",
      "properties": {
        "current_owner": { "type": "string" },
        "ownership_type": { "type": "string" },
        "report_type": { "type": "string" }
      },
      "additionalProperties": false
    }
  },
  "required": ["subject", "contract"],
  "additionalProperties": false
}
